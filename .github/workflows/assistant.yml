name: Ğ£Ñ‡ĞµĞ±Ğ½Ñ‹Ğ¹ Ğ°ÑÑĞ¸ÑÑ‚ĞµĞ½Ñ‚

on:
  workflow_dispatch:
    inputs:
      action:
        description: 'Ğ§Ñ‚Ğ¾ ÑĞ´ĞµĞ»Ğ°Ñ‚ÑŒ?'
        required: true
        default: 'schedule'
        type: choice
        options:
          - schedule
          - tasks
          - progress

jobs:
  send-message:
    runs-on: ubuntu-latest
    steps:
      - name: Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ñ€ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ñ
        uses: actions/checkout@v4

      - name: ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ´Ğ°Ñ‚Ñƒ
        id: date
        run: |
          DAYS=("Ğ¿Ğ¾Ğ½ĞµĞ´ĞµĞ»ÑŒĞ½Ğ¸Ğº" "Ğ²Ñ‚Ğ¾Ñ€Ğ½Ğ¸Ğº" "ÑÑ€ĞµĞ´Ğ°" "Ñ‡ĞµÑ‚Ğ²ĞµÑ€Ğ³" "Ğ¿ÑÑ‚Ğ½Ğ¸Ñ†Ğ°" "ÑÑƒĞ±Ğ±Ğ¾Ñ‚Ğ°" "Ğ²Ğ¾ÑĞºÑ€ĞµÑĞµĞ½ÑŒĞµ")
          DAY_NUM=$(date +%u)
          DAY_INDEX=$((DAY_NUM - 1))
          DAY_RU=${DAYS[$DAY_INDEX]}
          echo "day=$DAY_RU" >> $GITHUB_OUTPUT
          echo "date=$(date +'%d.%m.%Y')" >> $GITHUB_OUTPUT
          echo "time=$(date +'%H:%M')" >> $GITHUB_OUTPUT
          echo "week=$(date +%U)" >> $GITHUB_OUTPUT

      - name: ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ² Telegram
        uses: appleboy/telegram-action@master
        with:
          to: ${{ secrets.TELEGRAM_CHAT_ID }}
          token: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          message: |
            ğŸ“ *Ğ£Ñ‡ĞµĞ±Ğ½Ñ‹Ğ¹ Ğ°ÑÑĞ¸ÑÑ‚ĞµĞ½Ñ‚*
            
            ğŸ“… Ğ”ĞµĞ½ÑŒ: ${{ steps.date.outputs.day }}
            ğŸ“† Ğ”Ğ°Ñ‚Ğ°: ${{ steps.date.outputs.date }}
            â° Ğ’Ñ€ĞµĞ¼Ñ: ${{ steps.date.outputs.time }}
            
            ${{ github.event.inputs.action == 'schedule' && format('ğŸ“š *Ğ ĞĞ¡ĞŸĞ˜Ğ¡ĞĞĞ˜Ğ• ĞĞ {0}:*', steps.date.outputs.day) || '' }}
            ${{ github.event.inputs.action == 'schedule' && format('\n\n{0}', fromJSON('{"Ğ¿Ğ¾Ğ½ĞµĞ´ĞµĞ»ÑŒĞ½Ğ¸Ğº":"ğŸ•˜ 9:00 - ĞŸÑ€Ğ¾Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ\nğŸ•š 11:00 - ĞœĞ°Ñ‚ĞµĞ¼Ğ°Ñ‚Ğ¸ĞºĞ°\nğŸ•‘ 14:00 - ĞĞ½Ğ³Ğ»Ğ¸Ğ¹ÑĞºĞ¸Ğ¹","Ğ²Ñ‚Ğ¾Ñ€Ğ½Ğ¸Ğº":"ğŸ•˜ 9:00 - Ğ¤Ğ¸Ğ·Ğ¸ĞºĞ°\nğŸ• 13:00 - Web-Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ°\nğŸ•’ 15:00 - Ğ‘Ğ°Ğ·Ñ‹ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…","ÑÑ€ĞµĞ´Ğ°":"ğŸ•™ 10:00 - ĞĞ»Ğ³Ğ¾Ñ€Ğ¸Ñ‚Ğ¼Ñ‹\nğŸ•› 12:00 - Ğ¡ĞµÑ‚Ğ¸\nğŸ•“ 16:00 - ĞŸÑ€Ğ¾ĞµĞºÑ‚Ğ½Ğ°Ñ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°","Ñ‡ĞµÑ‚Ğ²ĞµÑ€Ğ³":"ğŸ•˜ 9:00 - Ğ˜ÑĞºÑƒÑÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ¸Ğ½Ñ‚ĞµĞ»Ğ»ĞµĞºÑ‚\nğŸ• 13:00 - ĞšĞ¸Ğ±ĞµÑ€Ğ±ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚ÑŒ","Ğ¿ÑÑ‚Ğ½Ğ¸Ñ†Ğ°":"ğŸ•™ 10:00 - ĞœĞ¾Ğ±Ğ¸Ğ»ÑŒĞ½Ğ°Ñ Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ°\nğŸ•‘ 14:00 - DevOps\nğŸ•” 17:00 - Code Review","ÑÑƒĞ±Ğ±Ğ¾Ñ‚Ğ°":"ğŸ•˜ 9:00 - Ğ¡Ğ°Ğ¼Ğ¾ÑÑ‚Ğ¾ÑÑ‚ĞµĞ»ÑŒĞ½Ğ°Ñ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°","Ğ²Ğ¾ÑĞºÑ€ĞµÑĞµĞ½ÑŒĞµ":"ğŸ“– Ğ’Ñ‹Ñ…Ğ¾Ğ´Ğ½Ğ¾Ğ¹ - Ğ¾Ñ‚Ğ´Ñ‹Ñ… Ğ¸ Ğ¿Ğ¾Ğ´Ğ³Ğ¾Ñ‚Ğ¾Ğ²ĞºĞ°"}')[steps.date.outputs.day]) || '' }}
            
            ${{ github.event.inputs.action == 'tasks' && 'âœ… *Ğ—ĞĞ”ĞĞ§Ğ˜ ĞĞ Ğ¡Ğ•Ğ“ĞĞ”ĞĞ¯:*' || '' }}
            ${{ github.event.inputs.action == 'tasks' && '\nâ€¢ ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ñ‡Ñ‚Ñƒ Ğ¸ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ' || '' }}
            ${{ github.event.inputs.action == 'tasks' && '\nâ€¢ Ğ¡Ğ´ĞµĞ»Ğ°Ñ‚ÑŒ Ğ´Ğ¾Ğ¼Ğ°ÑˆĞ½ĞµĞµ Ğ·Ğ°Ğ´Ğ°Ğ½Ğ¸Ğµ' || '' }}
            ${{ github.event.inputs.action == 'tasks' && '\nâ€¢ ĞŸĞ¾Ğ´Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ¸Ñ‚ÑŒÑÑ Ğº Ğ·Ğ°Ğ²Ñ‚Ñ€Ğ°ÑˆĞ½Ğ¸Ğ¼ Ğ·Ğ°Ğ½ÑÑ‚Ğ¸ÑĞ¼' || '' }}
            ${{ github.event.inputs.action == 'tasks' && '\nâ€¢ ĞŸĞ¾Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ñ‚ÑŒ Ğ½Ğ°Ğ´ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ¾Ğ¼' || '' }}
            ${{ github.event.inputs.action == 'tasks' && '\nâ€¢ ĞÑ‚Ğ´Ğ¾Ñ…Ğ½ÑƒÑ‚ÑŒ Ğ¸ Ğ²Ğ¾ÑÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ ÑĞ¸Ğ»Ñ‹' || '' }}
            
            ${{ github.event.inputs.action == 'progress' && 'ğŸ“Š *ĞŸĞ ĞĞ“Ğ Ğ•Ğ¡Ğ¡ Ğ—Ğ ĞĞ•Ğ”Ğ•Ğ›Ğ®:*' || '' }}
            ${{ github.event.inputs.action == 'progress' && format('\n\nğŸ“ˆ ĞĞµĞ´ĞµĞ»Ñ â„–{0}', steps.date.outputs.week) || '' }}
            ${{ github.event.inputs.action == 'progress' && '\nâ° Ğ§Ğ°ÑĞ¾Ğ² ÑƒÑ‡ĞµĞ±Ñ‹: 28' || '' }}
            ${{ github.event.inputs.action == 'progress' && '\nâœ… Ğ’Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¾ Ğ·Ğ°Ğ´Ğ°Ñ‡: 22' || '' }}
            ${{ github.event.inputs.action == 'progress' && '\nğŸ’» ĞĞ°Ğ¿Ğ¸ÑĞ°Ğ½Ğ¾ ÑÑ‚Ñ€Ğ¾Ğº ĞºĞ¾Ğ´Ğ°: 1500' || '' }}
            ${{ github.event.inputs.action == 'progress' && '\nğŸ“Š ĞĞ±Ñ‰Ğ¸Ğ¹ Ğ¿Ñ€Ğ¾Ğ³Ñ€ĞµÑÑ: 92%' || '' }}
            ${{ github.event.inputs.action == 'progress' && '\n\nğŸ† ĞÑ‚Ğ»Ğ¸Ñ‡Ğ½Ğ°Ñ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°! Ğ¢Ğ°Ğº Ğ´ĞµÑ€Ğ¶Ğ°Ñ‚ÑŒ!' || '' }}
            
            ---
            ğŸ¤– *ĞŸÑ€Ğ¾Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğ¸ÑÑ‚ ĞÑÑĞ¸ÑÑ‚ĞµĞ½Ñ‚ v1.0*
            ğŸš€ Ğ£Ğ´Ğ°Ñ‡Ğ¸ Ğ² Ğ¾Ğ±ÑƒÑ‡ĞµĞ½Ğ¸Ğ¸!
          parse_mode: markdown