name: –£—á–µ–±–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç

on:
  workflow_dispatch:
    inputs:
      action:
        description: '–ß—Ç–æ —Å–¥–µ–ª–∞—Ç—å?'
        required: true
        default: 'tasks'
        type: choice
        options:
          - schedule
          - tasks
          - progress

jobs:
  send-message:
    runs-on: ubuntu-latest
    steps:
      - name: –ü–æ–ª—É—á–∏—Ç—å –¥–∞—Ç—É
        id: date
        run: |
          DAYS=("–ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫" "–≤—Ç–æ—Ä–Ω–∏–∫" "—Å—Ä–µ–¥–∞" "—á–µ—Ç–≤–µ—Ä–≥" "–ø—è—Ç–Ω–∏—Ü–∞" "—Å—É–±–±–æ—Ç–∞" "–≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ")
          DAY_NUM=$(date +%u)
          DAY_INDEX=$((DAY_NUM - 1))
          DAY_RU=${DAYS[$DAY_INDEX]}
          echo "day=$DAY_RU" >> $GITHUB_OUTPUT
          echo "date=$(date +'%d.%m.%Y')" >> $GITHUB_OUTPUT
          echo "time=$(date +'%H:%M')" >> $GITHUB_OUTPUT

      - name: –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ Telegram
        uses: appleboy/telegram-action@master
        with:
          to: ${{ secrets.TELEGRAM_CHAT_ID }}
          token: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          message: |
            üìö *–£—á–µ–±–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç*
            
            üìÖ –î–µ–Ω—å: ${{ steps.date.outputs.day }}
            üìÜ –î–∞—Ç–∞: ${{ steps.date.outputs.date }}
            ‚è∞ –í—Ä–µ–º—è: ${{ steps.date.outputs.time }}
            
            ${{ github.event.inputs.action == 'schedule' && 'üéì *–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è:*' || '' }}
            ${{ github.event.inputs.action == 'schedule' && '\n‚Ä¢ 9:00 - –ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ' || '' }}
            ${{ github.event.inputs.action == 'schedule' && '\n‚Ä¢ 11:00 - –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞' || '' }}
            ${{ github.event.inputs.action == 'schedule' && '\n‚Ä¢ 14:00 - –ê–Ω–≥–ª–∏–π—Å–∫–∏–π' || '' }}
            
            ${{ github.event.inputs.action == 'tasks' && '‚úÖ *–ó–∞–¥–∞—á–∏ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è:*' || '' }}
            ${{ github.event.inputs.action == 'tasks' && '\n‚Ä¢ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—á—Ç—É' || '' }}
            ${{ github.event.inputs.action == 'tasks' && '\n‚Ä¢ –°–¥–µ–ª–∞—Ç—å –î–ó –ø–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—é' || '' }}
            ${{ github.event.inputs.action == 'tasks' && '\n‚Ä¢ –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å—Å—è –∫ –∑–∞–≤—Ç—Ä–∞—à–Ω–µ–º—É –¥–Ω—é' || '' }}
            
            ${{ github.event.inputs.action == 'progress' && 'üìä *–ü—Ä–æ–≥—Ä–µ—Å—Å –∑–∞ –Ω–µ–¥–µ–ª—é:*' || '' }}
            ${{ github.event.inputs.action == 'progress' && '\n‚è∞ –ß–∞—Å–æ–≤ —É—á–µ–±—ã: 25' || '' }}
            ${{ github.event.inputs.action == 'progress' && '\n‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ –∑–∞–¥–∞—á: 18' || '' }}
            ${{ github.event.inputs.action == 'progress' && '\nüìà –ü—Ä–æ–≥—Ä–µ—Å—Å: 85%' || '' }}
            
            ---
            üöÄ –£–¥–∞—á–∏ –≤ —É—á–µ–±–µ!
          parse_mode: markdown